(this.webpackJsonpRLJeopardy=this.webpackJsonpRLJeopardy||[]).push([[0],{146:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),s=a.n(c),o=(a(87),a(88),a(89),a(18)),l=a(19),i=a(23),u=a(20),p=a(22),d=a(69),m=a(155),f=a(156),h=a(157),g=a(21),v=function(e){var t=e.msg;return n.a.createElement("div",{className:"col-12"},n.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),n.a.createElement("p",null,"Loading ",t,". . ."))},y=a(34),E=a(12),O=a(151),b=a(152),D=a(153),j=a(154),w=a(77),N=a(65),A=a.n(N);a(134),a(135);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).startDateChanged=function(e){e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0)),console.log("start date change fired date,state:",e,a.state),a.setState({startDate:e})},a.endDateChanged=function(e){e&&(e.setHours(23),e.setMinutes(59),e.setSeconds(59)),console.log("end date change fired date,state:",e,a.state),a.setState({endDate:e})},a.searchClicked=function(){a.props.appProps.fetchQAs(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,{offset:0}))},a.catToggle=a.catToggle.bind(Object(E.a)(a)),a.valToggle=a.valToggle.bind(Object(E.a)(a)),a.catSelected=a.catSelected.bind(Object(E.a)(a)),a.valSelected=a.valSelected.bind(Object(E.a)(a)),a.startDateChanged=a.startDateChanged.bind(Object(E.a)(a)),a.endDateChanged=a.endDateChanged.bind(Object(E.a)(a)),a.searchClicked=a.searchClicked.bind(Object(E.a)(a)),a.state={catDropdownOpen:!1,valDropdownOpen:!1,catId:e.appProps.qas.catId,catTitle:e.appProps.qas.catTitle,value:e.appProps.qas.value,startDate:e.appProps.qas.startDate,endDate:e.appProps.qas.endDate},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"catToggle",value:function(){this.setState((function(e){return{catDropdownOpen:!e.catDropdownOpen}}))}},{key:"valToggle",value:function(){this.setState((function(e){return{valDropdownOpen:!e.valDropdownOpen}}))}},{key:"getText",value:function(e){var t=e.currentTarget.innerText;return"Clear"===t?null:t}},{key:"catSelected",value:function(e,t){this.setState({catTitle:this.getText(e),catId:this.catTitle2IdMap.get(this.getText(e))})}},{key:"valSelected",value:function(e){this.setState({value:this.getText(e)&&parseInt(this.getText(e),10)||null})}},{key:"selectedCategory",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.appProps.qas,a=t.data.filter((function(e){return""!==e.question&&(!t.category||t.category===e.category.id)&&(!t.value||t.value===e.value)&&(!t.startDate||e.airdate>=t.startDate)&&(!t.endDate||e.airdate<=t.endDate)}));this.catTitle2IdMap=new Map(a.map((function(e){return[e.category.title,e.category.id]})));var r=Array.from(this.catTitle2IdMap.entries()).sort((function(e,t){return e[0]>t[0]?1:-1})).map((function(t){return n.a.createElement(O.a,{key:t[0],onClick:e.catSelected},t[0])})),c=[100,200,400,800,1e3].map((function(t){return n.a.createElement(O.a,{key:t,onClick:e.valSelected},t)}));return console.log("filterBar render:",this.state),n.a.createElement("div",{className:"filterBar row"},n.a.createElement(b.a,{isOpen:this.state.catDropdownOpen,toggle:this.catToggle},n.a.createElement(D.a,{className:"filterBtn",caret:!0,color:"secondary"}," Category ",this.state.catTitle),n.a.createElement(j.a,null,n.a.createElement(O.a,{key:"clear",onClick:this.catSelected},"Clear"),n.a.createElement(O.a,{divider:!0}),r)),n.a.createElement(b.a,{isOpen:this.state.valDropdownOpen,toggle:this.valToggle},n.a.createElement(D.a,{className:"filterBtn",caret:!0,color:"secondary"}," Value ",this.state.value||""),n.a.createElement(j.a,null,n.a.createElement(O.a,{key:"clear",onClick:this.valSelected},"Clear"),n.a.createElement(O.a,{divider:!0}),c)),n.a.createElement("div",{className:"dateRangePicker"},n.a.createElement(A.a,{className:"filterBtn startDatePicker",popperPlacement:"top",placeholderText:"Start air date",maxDate:this.state.endDate?this.state.endDate:new Date,isClearable:!0,selected:this.state.startDate,onChange:this.startDateChanged}),n.a.createElement(A.a,{className:"filterBtn endDatePicker",popperPlacement:"top",placeholderText:"End air date",minDate:this.state.startDate?this.state.startDate:null,maxDate:new Date,isClearable:!0,selected:this.state.endDate,onChange:this.endDateChanged})),n.a.createElement(w.a,{className:"filterBtn searchBtn",color:"primary",onClick:this.searchClicked},"Search"),n.a.createElement("div",{className:"cardTotal"},"Showing ",a.length," Questions"))}}]),t}(n.a.Component),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).clicked=a.clicked.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"clicked",value:function(e){e.preventDefault(),this.props.appProps.fetchQAs(this.props.appProps.qas)}},{key:"render",value:function(){return n.a.createElement(w.a,{className:"moreButton",onClick:this.clicked,disabled:this.props.appProps.qas.isLoading},this.props.appProps.qas.isLoading?"Loading...":"More...")}}]),t}(n.a.Component),P=function(e){var t=e.getFullYear();return(1+e.getMonth()).toString().padStart(2,"0")+"/"+e.getDate().toString().padStart(2,"0")+"/"+t},S=function(e){var t=e.qa;return n.a.createElement(g.b,{to:"/search/".concat(t.id)},n.a.createElement(m.a,{className:"questionCard"},n.a.createElement(f.a,{className:"questionCategory"},t.category.title),n.a.createElement(h.a,{className:"question"},t.question)))},T=function(e){var t=e.appProps;if(t.qas.isLoading&&!t.qas.data)return n.a.createElement("div",{className:"row"},n.a.createElement(v,null)," ");if(t.qas.errMess)return n.a.createElement("div",{className:"col-12"}," ",n.a.createElement("h4",null,t.qas.errMess)," ");var a=t.qas.category,r=t.qas.value,c=t.qas.startDate,s=t.qas.endDate,o=t.qas.data.filter((function(e){return""!==e.question&&(!a||a===e.category.id)&&(!r||r===e.value)})),l=o.filter((function(e){return(!c||e.airdate>=c)&&(!s||e.airdate<=s)})),i=l.map((function(e){return n.a.createElement("div",{className:"questionTile col-lg-3 col-md-6 col-12",key:e.id},n.a.createElement(S,{qa:e}))}));return console.log("search render: ",c,s,o.length,l.length),n.a.createElement("div",{className:"questionBoard"},n.a.createElement(C,{appProps:t,minDate:new Date(Math.min.apply(Math,Object(d.a)(o.map((function(e){return e.airdate}))))),maxDate:new Date(Math.max.apply(Math,Object(d.a)(o.map((function(e){return e.airdate})))))}),n.a.createElement("div",{className:"row"},i),n.a.createElement("div",{className:"row"},n.a.createElement(q,{appProps:t})))},L=function(e){var t=e.catId,a=e.row,r=e.qa;return n.a.createElement("div",{className:"playTile col-2",key:t+"."+a},n.a.createElement(g.b,{to:"/play/".concat(t,"/").concat(a)},n.a.createElement(m.a,{className:"playCard"},n.a.createElement(h.a,{className:"playValue"},"$",r.value))))},Q=function(e){return e.cats.map((function(e){return n.a.createElement("div",{className:"playTile col-2",key:e.id},n.a.createElement(m.a,{className:"playCard"},n.a.createElement(h.a,{className:"playCategory"},e.title)))}))},I=function(e){var t=e.appProps;if(t.cats.isLoading)return n.a.createElement("div",{className:"row"}," ",n.a.createElement(v,{msg:"Categories"})," ");if(t.catQAs.isLoading)return n.a.createElement("div",{className:"row"}," ",n.a.createElement(v,{msg:"Categories Questions"})," ");if(t.cats.errMess)return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h4",null,t.qas.errMess)));for(var a=[],r=0;r<5;r++)for(var c=0;c<6;c++){var s=t.cats.cats[c].id;if(t.catQAs){var o=t.catQAs.catQAs["c"+s];if(o&&o[r]){for(var l=200*(r+1),i=0;i<o.length&&o[i].value!==l;)i++;i<o.length&&a.push(n.a.createElement(L,{key:"c"+c+"r"+r,catId:s,row:i,qa:o[i]}))}}}return n.a.createElement("div",{className:"playBoard"},n.a.createElement("div",{className:"categoryBar row"},n.a.createElement(Q,{cats:t.cats.cats})),n.a.createElement("div",{className:"row"},a))};function M(e){var t=e.qa;return n.a.createElement(m.a,{className:"detailCard"},n.a.createElement(f.a,{className:"detailCategory"},n.a.createElement("b",null,t.question)),n.a.createElement(h.a,{className:"detail"},n.a.createElement("dl",{className:"row p-1"},n.a.createElement("dt",{className:"col-6"},"Answer"),n.a.createElement("dd",{className:"col-6"},n.a.createElement("b",null,t.answer)),n.a.createElement("dt",{className:"col-6"},"Category"),n.a.createElement("dd",{className:"col-6"},t.category.title),n.a.createElement("dt",{className:"col-6"},"Value"),n.a.createElement("dd",{className:"col-6"},t.value),n.a.createElement("dt",{className:"col-6"},"Air Date"),n.a.createElement("dd",{className:"col-6"},P(t.airdate)))))}var _=function(e){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"question col-12"},n.a.createElement(M,{qa:e.qa}))))},x=a(158),B=a(159),F=a(160),G=a(161),J=a(162),R=a(163),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={isNavOpen:!1},a.toggleNav=a.toggleNav.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"render",value:function(){return n.a.createElement(x.a,{dark:!0,expand:"md",fixed:"top"},n.a.createElement("div",{className:"container"},n.a.createElement(B.a,{onClick:this.toggleNav}),n.a.createElement(F.a,{className:"mr-auto",href:"/jeopardy/"},n.a.createElement("b",null,"Jeopardy!")),n.a.createElement(G.a,{isOpen:this.state.isNavOpen,navbar:!0},n.a.createElement(J.a,{navbar:!0},n.a.createElement(R.a,null,n.a.createElement(g.c,{className:"nav-link",to:"/search"},n.a.createElement("span",{className:"fa fa-search fa-lg"})," Search")),n.a.createElement(R.a,null,n.a.createElement(g.c,{className:"nav-link",to:"/play"},n.a.createElement("span",{className:"fa fa-gamepad fa-lg"})," Play"))))))}}]),t}(r.Component);var H=function(e){return n.a.createElement("div",{className:"footer"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-auto"},n.a.createElement("p",null,"Developed by Rachel Lu"))))},W=a(30),$=a(51),Y="https://cors-anywhere.herokuapp.com/http://jservice.io/";function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U=function(e){return function(t){return fetch(Y+"api/clues?category="+e).then((function(e){if(e.ok)return e;var t=new Error("Fetching categories question error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(a){return t(re(e,a))})).catch((function(e){return t(Z(e.message))}))}},X=function(e){return{type:"QAS_LOADING",payload:e}},Z=function(e){return{type:"QAS_FAILED",payload:e}},ee=function(e,t){return{type:"QAS_ADD",payload:K({},e,{qas:t})}},te=function(e){return{type:"CAT_LOADING",payload:e}},ae=function(e){return{type:"CAT_ADD",payload:e}},re=function(e,t){return{type:"CAT_QAS_ADD",catId:e,payload:t}},ne=a(165),ce=a(164),se=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchQAs(0),this.props.fetchCats()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(V,null),n.a.createElement(ne.a,null,n.a.createElement(ce.a,{key:this.props.location.key,classNames:"page",timeout:300},n.a.createElement(W.d,{location:this.props.location},n.a.createElement(W.b,{exact:!0,path:"/search",component:function(){return n.a.createElement(T,{appProps:e.props})}}),n.a.createElement(W.b,{path:"/search/:qaId",component:function(t){var a=t.match;return n.a.createElement(_,{qa:e.props.qas.data.filter((function(e){return e.id===parseInt(a.params.qaId,10)}))[0],isLoading:e.props.qas.isLoading,errMess:e.props.qas.errMess})}}),n.a.createElement(W.b,{exact:!0,path:"/play",component:function(){return n.a.createElement(I,{appProps:e.props})}}),n.a.createElement(W.b,{path:"/play/:catId/:row",component:function(t){var a=t.match;return n.a.createElement(_,{qa:e.props.catQAs.catQAs["c"+a.params.catId][a.params.row],isLoading:e.props.catQAs.isLoading,errMess:e.props.catQAs.errMess})}}),n.a.createElement(W.a,{to:"/search"})))),n.a.createElement(H,null))}}]),t}(r.Component),oe=Object(W.g)(Object($.b)((function(e){return{qas:e.qas,cats:e.cats,catQAs:e.catQAs}}),(function(e){return{fetchQAs:function(t){return e(function(e){return function(t){t(X(!0));var a=Y+"api/clues?offset="+(e&&e.offset||0)+(e.catId?"&category="+e.catId:"")+(e.value?"&value="+e.value:"")+(e.startDate&&e.endDate?"&min_date="+P(e.startDate)+"&max_date="+P(e.endDate):(e.startDate?"&max_date="+P(e.startDate):"")+(e.endDate?"&min_date="+P(e.endDate):""));return console.log("fetchQAs: ",a,e),fetch(a).then((function(e){if(e.ok)return e;var t=new Error("Fetching questions error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(a){return t(ee(e,a))})).catch((function(e){return t(Z(e.message))}))}}(t))},fetchCats:function(){return e((function(e){e(te(!0));var a=1e3*Math.random();return fetch(Y+"api/categories?offset="+a+"&count="+(t||100)).then((function(e){if(e.ok)return e;var t=new Error("Fetching categories error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){var a=t.sort((function(e,t){return e.clues_count<t.clues_count?1:-1})).slice(0,6);return a.map((function(t){return e(U(t.id))})),e(ae(a))})).catch((function(t){return e(Z(t.message))}))}));var t}}}))(se)),le=(a(146),a(37));function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QAS_LOADING":return ue({},e,{isLoading:t.payload});case"QAS_FAILED":return ue({},e,{isLoading:!1,errMess:t.payload});case"QAS_ADD":var a=t.payload.offset>0&&e.qas?e.qas:[],r=t.payload.qas.map((function(e){return ue({},e,{airdate:new Date(e.airdate)})}));return console.log("reducer addQAs:",r.length),t.payload.qas=null,ue({},e,{isLoading:!1,errMess:null},t.payload,{data:a.concat(r)});default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,cats:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAT_LOADING":return ue({},e,{isLoading:t.payload});case"CAT_FAILED":return ue({},e,{isLoading:!1,errMess:t.payload});case"CAT_ADD":return ue({},e,{isLoading:!1,errMess:null,cats:t.payload});default:return e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,catQAs:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAT_QAS_LOADING":return ue({},e,{isLoading:t.payload});case"CAT_QAS_FAILED":return ue({},e,{isLoading:!1,errMess:t.payload});case"CAT_QAS_ADD":var a=e.catQAs;return a["c"+t.catId]=t.payload.filter((function(e){return e.value>0})).sort((function(e,t){return e.value>t.value?1:-1})).map((function(e){return ue({},e,{airdate:new Date(e.airdate)})})),ue({},e,{isLoading:!1,errMess:null,catQAs:a});default:return e}},fe=a(79),he=a(80),ge=a.n(he),ve=Object(le.d)(Object(le.c)({qas:pe,cats:de,catQAs:me}),Object(le.a)(fe.a,ge.a)),ye=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement($.a,{store:ve},n.a.createElement(g.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(oe,null))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e,t,a){e.exports=a(147)},88:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.05547d3c.chunk.js.map